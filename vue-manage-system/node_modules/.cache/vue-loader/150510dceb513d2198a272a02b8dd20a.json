{"remainingRequest":"D:\\imodou-blog\\vue-manage-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\imodou-blog\\vue-manage-system\\src\\components\\page\\article_add.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\imodou-blog\\vue-manage-system\\src\\components\\page\\article_add.vue","mtime":1590149811315},{"path":"D:\\imodou-blog\\vue-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\imodou-blog\\vue-manage-system\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\imodou-blog\\vue-manage-system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\imodou-blog\\vue-manage-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\imodou-blog\\vue-manage-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n    import { mavonEditor } from 'mavon-editor'\n    import 'mavon-editor/dist/css/index.css'\n    import VueCropper  from 'vue-cropperjs';\nimport Axios from 'axios';\n    export default {\n        name: 'markdown',\n        data: function(){\n            return {\n                content:'',\n                html:'',\n                configs: {\n                },\n                form: {\n               \n                },\n                imgSrc: '',\n                cropImg: '',\n                dialogVisible: false,\n                defaultSrc: require('../../assets/img/img.jpg'),\n                options:[]\n            }\n        },\n        components: {\n            mavonEditor,\n            VueCropper\n        },\n        methods: {\n            // 将图片上传到服务器，返回地址替换到md中\n            $imgAdd(pos, $file){\n                var formdata = new FormData();\n                formdata.append('file', $file);\n                // 这里没有服务器供大家尝试，可将下面上传接口替换为你自己的服务器接口\n                Axios({\n                    url: '/api/article/upload',\n                    method: 'post',\n                    data: formdata,\n                    headers: { 'Content-Type': 'multipart/form-data' },\n                }).then((res) => {\n                    this.$refs.md.$img2Url(pos, res.data.data);\n                })\n            },\n            change(value, render){\n                // render 为 markdown 解析后的结果\n                this.html = render;\n            },\n            submit(){\n                // console.log(this.form);\n                // console.log(this.content);\n                // console.log(this.html);\n\n                this.form.content=this.content;\n                Axios.post(\"/api/article\",this.form).then((res)=>{\n                    if(res.data.flag){\n                          this.$message.success('提交成功！');\n                    }else{\n                        this.$message.error(res.data.message);\n                    }\n                    \n                })\n                \n\n              \n            },\n            setImage(e){\n               \n                const file = e.target.files[0];\n                \n                if (!file.type.includes('image/')) {\n                    return;\n                }\n                const reader = new FileReader();\n                reader.onload = (event) => {\n              \n                    this.dialogVisible = true;\n                    this.imgSrc = event.target.result;\n                    this.$refs.cropper && this.$refs.cropper.replace(event.target.result);\n                };\n                reader.readAsDataURL(file);\n                \n                let formData = new FormData()\n                formData.append('file',e.target.files[0])\n                Axios({\n                    url:\"/api/article/upload\",\n                    method: 'post',\n                    data: formData,\n                    processData: false,// 告诉axios不要去处理发送的数据(重要参数)\n                    contentType: false,   // 告诉axios不要去设置Content-Type请求头\n                }).then((res)=>{\n                    if(res.data.flag){\n                        this.form.coverPhoto=res.data.data;\n                    }else{\n                        this.$message.error(res.data.message);\n                    }\n                    \n                })\n            \n\n            },\n            cropImage () {\n                this.cropImg = this.$refs.cropper.getCroppedCanvas().toDataURL();\n            },\n            cancelCrop(){\n                this.dialogVisible = false;\n                this.cropImg = this.defaultSrc;\n            },\n            imageuploaded(res) {\n                console.log(res)\n            },\n            handleError(){\n                this.$notify.error({\n                    title: '上传失败',\n                    message: '图片上传接口上传失败，可更改为自己的服务器接口'\n                });\n            },\n                    //选择父类\n            handleChange(value){\n    \n                this.form.categories=value;\n              \n            }\n\n        },\n        created(){\n            this.cropImg = this.defaultSrc;\n            //查询分类\n            Axios.get(\"/api/category/tree\").then((response)=>{\n            this.options=response.data;\n            \n        })\n        }\n    }\n",null]}